# Test Execution Matrix
# Defines which Test Suites run on which ESB environments.

suites:
  smoke:
    description: Fast connectivity tests for all components
    targets:
    - ../scenarios/smoke/test_connectivity.py
    - ../scenarios/smoke/test_smoke.py
    exclude: []
  standard:
    description: Standard E2E Scenarios (Autoscaling + Standard)
    targets:
    - ../scenarios/autoscaling/
    - ../scenarios/standard/
    exclude: []
  runtime:
    description: Runtime Scenarios (non-smoke)
    targets:
    - ../scenarios/runtime/java/
    - ../scenarios/runtime/python/
    exclude: []
  restart:
    description: Restart scenarios
    targets:
    - ../scenarios/restart/
    exclude: []

matrix:
# docker runtime
- esb_env: e2e-docker
  deploy_templates:
  - e2e/fixtures/template.core.yaml
  - e2e/fixtures/template.stateful.yaml
  - e2e/fixtures/template.image.yaml
  suites:
  - smoke
  - standard
  - runtime
  - restart

# containerd runtime
- esb_env: e2e-containerd
  deploy_templates:
  - e2e/fixtures/template.core.yaml
  - e2e/fixtures/template.stateful.yaml
  - e2e/fixtures/template.image.yaml
  suites:
  - smoke
  - standard

# containerd + firecracker runtime (CONTAINERD_RUNTIME=aws.firecracker)
# - esb_env: e2e-firecracker
#   suites:
#   - smoke
#   - standard
