# Test Execution Matrix
# Defines which Test Suites run on which ESB environments.

suites:
  smoke:
    description: Fast connectivity tests for all components
    targets:
    - ../scenarios/smoke/test_connectivity.py
    - ../scenarios/smoke/test_containerd_network_identity.py
    - ../scenarios/smoke/test_smoke.py
    exclude: []
  standard:
    description: Standard E2E Scenarios (Autoscaling + Standard)
    targets:
    - ../scenarios/autoscaling/
    - ../scenarios/standard/
    exclude: []
  runtime:
    description: Runtime Scenarios (non-smoke)
    targets:
    - ../scenarios/runtime/java/
    - ../scenarios/runtime/python/
    exclude: []
  restart:
    description: Restart scenarios
    targets:
    - ../scenarios/restart/
    exclude: []

matrix:
# docker runtime
- env: e2e-docker
  artifact_manifest: e2e/artifacts/e2e-docker/artifact.yml
  suites:
  - smoke
  - standard
  - runtime
  - restart

# containerd runtime
- env: e2e-containerd
  artifact_manifest: e2e/artifacts/e2e-containerd/artifact.yml
  suites:
  - smoke
  - standard

# containerd + firecracker runtime (CONTAINERD_RUNTIME=aws.firecracker)
# - env: e2e-firecracker
#   suites:
#   - smoke
#   - standard
