# Where: config/container-structure-test/agent.yaml
# What: Container Structure Tests for the esb-agent image.
# Why: Verify entrypoint, port, and runtime wiring files.

schemaVersion: "2.0.0"

metadataTest:
  exposedPorts: ["50051"]
  entrypoint: ["/app/entrypoint.sh"]
  cmd: ["/app/agent"]

fileExistenceTests:
  - name: "agent-binary"
    path: "/app/agent"
    shouldExist: true
  - name: "entrypoint"
    path: "/app/entrypoint.sh"
    shouldExist: true
  - name: "cni-config"
    path: "/etc/cni/net.d/10-esb.conflist"
    shouldExist: true
