# Auto-generated by SAM Template Generator
# DO NOT EDIT MANUALLY - Regenerate with: python -m tools.generator.main

defaults:
  environment:
    GATEWAY_INTERNAL_URL: "${GATEWAY_INTERNAL_URL}"
    LOG_LEVEL: "${LOG_LEVEL}"
    AWS_ACCESS_KEY_ID: "${RUSTFS_ACCESS_KEY}"
    AWS_SECRET_ACCESS_KEY: "${RUSTFS_SECRET_KEY}"
    AWS_DEFAULT_REGION: "ap-northeast-1"
  scaling:
    idle_timeout: 300
    acquire_timeout: 5.0

functions:
{% for func in functions %}
  {{ func.name }}:
    {% if registry %}
    image: "{{ registry }}/{{ func.name }}:{{ tag }}"
    {% else %}
    image: "{{ func.name }}:{{ tag }}"
    {% endif %}
    {% if func.timeout is not none %}
    timeout: {{ func.timeout }}
    {% endif %}
    {% if func.memory_size is not none %}
    memory_size: {{ func.memory_size }}
    {% endif %}
    {% if func.environment %}
    environment:
      {% for key, value in func.environment.items() %}
      {{ key }}: "{{ value }}"
      {% endfor %}
    {% endif %}
    {% if func.scaling %}
    scaling:
      {% for key, value in func.scaling.items() %}
      {{ key }}: {{ value }}
      {% endfor %}
    {% endif %}
{% endfor %}
