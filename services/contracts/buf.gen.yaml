# Where: services/contracts/buf.gen.yaml
# What: Buf code generation settings for Agent (Go) and Gateway (Python) stubs.
# Why: Replace ad-hoc protoc wrappers with deterministic, version-pinned generation.
version: v2
inputs:
  - directory: proto
plugins:
  - remote: buf.build/protocolbuffers/go:v1.36.10
    out: ../agent/pkg/api/v1
    opt:
      - paths=source_relative
  - remote: buf.build/grpc/go:v1.5.1
    out: ../agent/pkg/api/v1
    opt:
      - paths=source_relative
  - remote: buf.build/protocolbuffers/python:v31.1
    out: ../gateway/pb
  - remote: buf.build/grpc/python:v1.76.0
    out: ../gateway/pb
