# Test Execution Matrix
# Defines which Test Suites run on which Profiles (Mode + Env).

suites:
  # Quick connectivity checks - run first
  smoke:
    description: "Fast connectivity tests for all components"
    targets:
      - "tests/scenarios/smoke/"
    exclude: []

  standard:
    description: "Standard E2E Scenarios (Autoscaling + Standard)"
    targets:
      - "tests/scenarios/autoscaling/"
      - "tests/scenarios/standard/"
    exclude: []

profiles:
  # Profile A: Firecracker Mode (using autoscaling config)
  # Corresponds to legacy "Auto-Scaling" scenario
  e2e-firecracker:
    description: "Firecracker Mode with Auto-Scaling"
    mode: firecracker
    env_file: "tests/environments/.env.autoscaling"

  # Profile B: Containerd Mode (using containerd + autoscaling config?)
  # Legacy "Auto-Scaling (Containerd)" used .env.containerd
  # We assume .env.containerd inherits/overrides necessary bits.
  e2e-containerd:
    description: "Containerd Mode with Auto-Scaling"
    mode: containerd
    env_file: "tests/environments/.env.containerd"

matrix:
  # Smoke tests first (fast feedback)
  - suite: smoke
    profiles:
      - e2e-containerd
      - e2e-firecracker

  # Full suite on both profiles
  - suite: standard
    profiles:
      - e2e-containerd
      - e2e-firecracker
